# üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Database

## ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö database ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß (schema ‡πÉ‡∏´‡∏°‡πà)

---

## üîç ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ **2 ‡∏â‡∏ö‡∏±‡∏ö sample data ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô**:

### 1Ô∏è‚É£ `sample_data.sql` (‡πÄ‡∏Å‡πà‡∏≤ ‚ùå ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)
- Schema ‡πÄ‡∏Å‡πà‡∏≤: `department` = ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
- Roles: user, director, central_office, admin (4 ‡πÅ‡∏ö‡∏ö)
- EMP001 = ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ (‡∏Å‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ - ‡πÄ‡∏à‡πâ‡∏≤‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£)

### 2Ô∏è‚É£ `sample_data_4_levels.sql` (‡πÉ‡∏´‡∏°‡πà ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ)
- Schema ‡πÉ‡∏´‡∏°‡πà: `department_id` = FK ‡πÑ‡∏õ‡∏¢‡∏±‡∏á departments table
- Roles: user, director, central_office_staff, central_office_head, admin (5 ‡πÅ‡∏ö‡∏ö)
- EMP001 = ‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ (‡∏Å‡∏≠‡∏á IT - ‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏ö‡∏ö)

---

## üõ†Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ (3 ‡∏ß‡∏¥‡∏ò‡∏µ)

### ‚ö° ‡∏ß‡∏¥‡∏ò‡∏µ 1: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏°‡πà (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)

```bash
# ‡πÑ‡∏õ‡∏ó‡∏µ‡πà backend directory
cd backend

# ‡∏£‡∏±‡∏ô script ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå SQL
# Step 1: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ + ‡∏™‡∏£‡πâ‡∏≤‡∏á schema ‡πÉ‡∏´‡∏°‡πà
npm run db:reset    # (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏´‡∏£‡∏∑‡∏≠

# Step 2: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
npm run migrate     # ‡∏£‡∏±‡∏ô migrate.js ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ä‡πâ sample_data_4_levels.sql
```

**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
- EMP001 login ‚Üí ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- Leave balance: ‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢ 30/30, ‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô 10/10, ‡∏•‡∏≤‡∏Å‡∏¥‡∏à 3/3 ‚úÖ

---

### üìù ‡∏ß‡∏¥‡∏ò‡∏µ 2: ‡πÉ‡∏ä‡πâ Supabase Console (GUI)

1. ‡πÄ‡∏Ç‡πâ‡∏≤ [Supabase Dashboard](https://supabase.com)
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å database ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. SQL Editor > ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `database/schema.sql` ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô
4. ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô `database/sample_data_4_levels.sql`

---

### üîÑ ‡∏ß‡∏¥‡∏ò‡∏µ 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Backend

‡∏´‡∏≤‡∏Å**‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤**:

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ß‡πà‡∏≤ query ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö schema ‡πÄ‡∏Å‡πà‡∏≤:
- [backend/src/controllers/auth.controller.js](backend/src/controllers/auth.controller.js#L25)
- [backend/src/controllers/leave.controller.js](backend/src/controllers/leave.controller.js#L415)

‚ö†Ô∏è **‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥** - ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢‡πÄ‡∏Å‡∏¥‡∏î‡∏ö‡∏±‡∏Å

---

## ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ

```
Login: EMP001 / 123456
‚ùå ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ:
   - Leave balance: 30/10/3/0 (‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á)
   - Department: text string (‡πÑ‡∏°‡πà match)
   - Leave record: ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö DB

‚úÖ ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ:
   - Leave balance: 30/30 (‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢), 10/10 (‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô), 3/3 (‡∏•‡∏≤‡∏Å‡∏¥‡∏à)
   - Department: "‡∏Å‡∏≠‡∏á‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®"
   - Position: "‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏ö‡∏ö"
   - Leave record: ‡∏°‡∏µ LV-202601-0004 (W) 17/01/2026 - 23/01/2026
```

---

## üìã Script ‡πÉ‡∏ô package.json (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)

```json
{
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  }
}
```

‚ùå **‡∏´‡∏≤‡∏¢‡πÑ‡∏õ**: `migrate`, `db:reset`, `db:setup` scripts

‚úÖ **‡∏Ñ‡∏ß‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°** (optional):
```json
"db:setup": "node setup-database.js",
"db:migrate": "node migrate.js",
"db:reset": "node scripts/reset-db.js"
```

---

## üéØ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥

- [ ] ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÑ‡∏õ‡πÉ‡∏´‡∏°‡πà?
- [ ] ‡∏ñ‡πâ‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î: ‡∏£‡∏±‡∏ô `npm run migrate` ‡πÉ‡∏ô backend
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö: Login EMP001 ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- [ ] ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: Leave balance, Department, Roles ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

