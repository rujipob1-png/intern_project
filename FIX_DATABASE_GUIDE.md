# üöÄ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Quick Action Guide)

## üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡πÉ‡∏ô 2 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å

---

## ‚úÖ ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 1: ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

### Step 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£
```bash
# ‡πÄ‡∏õ‡∏¥‡∏î Terminal ‡πÉ‡∏ô Backend directory
cd c:\Users\Asus\Desktop\spoon_intern\backend

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)
npm install
```

### Step 2: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 2 ‡∏ß‡∏¥‡∏ò‡∏µ:

#### ‡∏ß‡∏¥‡∏ò‡∏µ A: ‡πÉ‡∏ä‡πâ Script (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
```bash
# ‡∏´‡∏≤‡∏ß‡πà‡∏≤‡∏°‡∏µ script ‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ
npm run migrate
```

#### ‡∏ß‡∏¥‡∏ò‡∏µ B: ‡πÉ‡∏ä‡πâ Supabase Console (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
1. ‡πÄ‡∏Ç‡πâ‡∏≤ https://supabase.com ‚Üí Dashboard
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Project ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. SQL Editor
4. **Copy & Paste & Run** ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ **‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö:**
   - `database/schema.sql` (‡∏™‡∏£‡πâ‡∏≤‡∏á tables ‡πÉ‡∏´‡∏°‡πà)
   - `database/sample_data_4_levels.sql` (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

#### ‡∏ß‡∏¥‡∏ò‡∏µ C: ‡πÉ‡∏ä‡πâ Direct SQL Query (‡∏ñ‡πâ‡∏≤ Command Line ‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤)
```sql
-- 1. Clear old data first (‡∏£‡∏∞‡∏ß‡∏±‡∏á! ‡∏•‡∏ö‡∏≠‡∏Å)
DELETE FROM approvals;
DELETE FROM leave_history;
DELETE FROM leaves;
DELETE FROM users;
DELETE FROM leave_types;
DELETE FROM departments;

-- 2. ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏±‡∏ô schema.sql
-- 3. ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô sample_data_4_levels.sql
```

### Step 3: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö
```bash
# ‡πÉ‡∏ô Backend terminal
npm run dev

# ‡πÉ‡∏ô Browser
# Login: EMP001 / 123456
# ‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤ Dashboard
```

### Step 4: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

| ‡∏ó‡∏µ‡πà | ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|----|--------|-------|
| 1 | Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à | ‚úÖ |
| 2 | Dashboard ‡πÅ‡∏™‡∏î‡∏á "‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ" | ‚úÖ |
| 3 | Department = "‡∏Å‡∏≠‡∏á‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®" | ‚úÖ |
| 4 | Position = "‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏∞‡∏ö‡∏ö" | ‚úÖ |
| 5 | Leave Balance: 30, 10, 3 (‡∏•‡∏≤‡∏õ‡πà‡∏ß‡∏¢, ‡∏•‡∏≤‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô, ‡∏•‡∏≤‡∏Å‡∏¥‡∏à) | ‚úÖ |
| 6 | ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏•‡∏≤: ‡∏°‡∏µ LV-202601-0004 (W) | ‚úÖ |

---

## ‚ö†Ô∏è ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô)

### ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤:
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö [auth.controller.js](backend/src/controllers/auth.controller.js) - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ query ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö [leave.controller.js](backend/src/controllers/leave.controller.js) - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ balance calculation ‡∏ñ‡∏π‡∏Å
3. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Frontend ‡∏ó‡∏µ‡πà reference `department` field
4. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

‚ö†Ô∏è **‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥** - ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á bugs ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏°‡∏≤

---

## üìã Troubleshooting

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "Cannot find module"
```
‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies:
npm install
```

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "Connection refused to Supabase"
```
‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
1. .env file ‡∏°‡∏µ SUPABASE_URL ‡πÅ‡∏•‡∏∞ SUPABASE_ANON_KEY ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. Internet connection OK ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. Supabase project ‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "Duplicate key value violates"
```
‡πÄ‡∏°‡∏∑‡πà‡∏≠ run sample data ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ error ‡∏ô‡∏µ‡πâ = ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ
‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô (DELETE FROM tables)
```

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Dashboard ‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
```
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend restart ‡πÅ‡∏•‡πâ‡∏ß? (npm run dev)
2. Browser cache? (Ctrl+Shift+Delete ‡πÄ‡∏û‡∏∑‡πà‡∏≠ clear)
3. Database ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå? (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Supabase console)
```

---

## ‚ú® ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

### ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Package.json Scripts (Optional)
```json
{
  "scripts": {
    "start": "node src/server.js",
    "dev": "nodemon src/server.js",
    "test": "echo \"Error: no test specified\" && exit 1",
    "db:migrate": "node migrate.js",
    "db:setup": "node setup-database.js"
  }
}
```

### ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥:
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á 5 roles (user, director, central_office_staff, central_office_head, admin)
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ 4 ‡∏£‡∏∞‡∏î‡∏±‡∏ö
- [ ] ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

---

## üí° ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥

‚úÖ **‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô**: Backup ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
‚úÖ **‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
‚úÖ **‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ**: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á
‚úÖ **‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó**: Document ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ schema ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß

---

## üìû ‡∏ñ‡πâ‡∏≤‡∏ï‡∏¥‡∏î

‡∏ñ‡πâ‡∏≤‡∏ï‡∏¥‡∏î ‡πÉ‡∏´‡πâ:
1. ‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå error log
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö database schema ‡πÉ‡∏ô Supabase console
3. ‡∏•‡∏≠‡∏á reset ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î & run script ‡πÉ‡∏´‡∏°‡πà
4. ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Üí ‡∏•‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ B (GUI) ‡πÅ‡∏ó‡∏ô

