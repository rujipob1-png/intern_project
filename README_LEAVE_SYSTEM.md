# ระบบลาออนไลน์ 4 ระดับ (Government Leave System)

## ภาพรวมระบบ
ระบบนี้ออกแบบมาเพื่อรองรับการลาของข้าราชการ/เจ้าหน้าที่ โดยมีขั้นตอนการอนุมัติ 4 ระดับ (Multi-level Approval) พร้อมกฎและประเภทการลาที่ละเอียดตามระเบียบราชการ

---

## โครงสร้าง Role (บทบาท)

1. **User (พนักงาน/เจ้าหน้าที่ทั่วไป)**
   - สร้าง/แก้ไข/ยกเลิกคำขอลา
   - ดูวันลาคงเหลือ, ประวัติการลา, สถานะคำขอลา
   - ประเภทการลาที่ใช้ได้: ลาป่วย, ลาพักผ่อน, ลากิจ, ลาคลอด, ลาเพื่อกิจพิเศษ, ลาอุปสมบท/ศึกษาต่อ

2. **Director (ผู้อำนวยการกลุ่ม)**
   - ตรวจสอบ/อนุมัติ/ปฏิเสธ/ขอแก้ไขคำขอลาในกลุ่มงาน
   - เห็นคำขอลาจาก user ในกลุ่มงานตัวเอง

3. **Central Office Staff (เจ้าหน้าที่กลาง)**
   - ตรวจสอบความถูกต้องของคำขอที่ผ่าน director
   - อนุมัติ/ปฏิเสธ/ขอแก้ไข ส่งต่อให้ Central Office Head

4. **Central Office Head (หัวหน้ากลุ่มกลาง)**
   - ตรวจสอบ/อนุมัติขั้นสุดท้าย
   - อนุมัติ → หักวันลาคงเหลือ, ปฏิเสธ/ขอแก้ไข → แจ้งกลับ

5. **Admin (ผู้ดูแลระบบ)**
   - จัดการ user, role, department, ประเภทการลา, กฎวันลา
   - ดูสถิติ, export ข้อมูล, audit log

---

## ประเภทการลา (Leave Types)

| ประเภท | ตัวย่อ | จำนวนสูงสุด | เงื่อนไข/หมายเหตุ |
|--------|--------|-------------|-------------------|
| ลาป่วย | SL     | 30 วัน/ปี   | เกิน 3 วันต้องแนบใบรับรองแพทย์ |
| ลาพักผ่อน | VL  | 10 วัน/ปี   | ต้องแจ้งล่วงหน้า ใช้ได้เฉพาะพนักงานประจำ |
| ลากิจส่วนตัว | PL | 3 วัน/ปี   | ไม่ต้องแนบเอกสาร |
| ลาคลอด | ML     | 90 วัน/ครั้ง | เฉพาะผู้หญิง ต้องแนบใบรับรองแพทย์ |
| ลาเพื่อกิจพิเศษ | SPL | ตามประกาศ | ต้องแนบเอกสารตามที่กำหนด |
| ลาอุปสมบท/ศึกษาต่อ | OEL | ตามระเบียบ | ต้องแนบเอกสารรับรอง |

ตัวย่อ
ป = ลาป่วย
ก = ลากิจส่วนตัว
พ =ลาพักผ่อน
ค =ลาคลอดบุตร 
บ =ลาอุปสมบท 
ฮ = ลาประกอบพิธีฮัจย์
ต = ลาเขารับการตรวจเลือก
ส = มาสาย
ข = ขาดราชการ

---

## กฎ/ข้อบังคับสำคัญ
- วันลาคงเหลือแต่ละประเภทจะถูกหักเมื่อ “อนุมัติสมบูรณ์” เท่านั้น
- ลาป่วยเกิน 3 วันต้องแนบใบรับรองแพทย์
- ลาพักผ่อนต้องแจ้งล่วงหน้าอย่างน้อย 3 วัน
- ลากิจใช้ได้เฉพาะกรณีส่วนตัว ไม่ต้องแนบเอกสาร
- ลาคลอดใช้ได้เฉพาะผู้หญิง, ต้องแนบใบรับรองแพทย์
- ลาอุปสมบท/ศึกษาต่อ ต้องแนบเอกสารรับรองจากหน่วยงาน
- ทุกคำขอลาต้องระบุเหตุผล, วันที่ลา, ประเภทการลา, และแนบเอกสารถ้าจำเป็น

---

## Process Flow (ละเอียด)
1. User สร้างคำขอลา → กรอกข้อมูลครบทุกฟิลด์ → ส่งคำขอ
2. Director ตรวจสอบคำขอ → อนุมัติ/ปฏิเสธ/ขอแก้ไข → ถ้าอนุมัติ ส่งต่อ central_office_staff
3. Central Office Staff ตรวจสอบเอกสาร/ข้อมูล → อนุมัติ/ปฏิเสธ/ขอแก้ไข → ถ้าอนุมัติ ส่งต่อ central_office_head
4. Central Office Head ตรวจสอบขั้นสุดท้าย → อนุมัติ/ปฏิเสธ/ขอแก้ไข → ถ้าอนุมัติ วันลาถูกหักจากยอดคงเหลือ
5. Admin ดูแลระบบ, กำหนดกฎ, เพิ่ม/ลบ/แก้ไข user, role, department, ประเภทการลา, export ข้อมูล ฯลฯ

---

## สถานะคำขอลา (Leave Status)
- pending_director_approval (รอผอ.กลุ่มอนุมัติ)
- pending_central_staff_approval (รอเจ้าหน้าที่กลางอนุมัติ)
- pending_central_head_approval (รอหัวหน้ากลุ่มกลางอนุมัติ)
- approved (อนุมัติสมบูรณ์)
- rejected (ปฏิเสธ)
- request_edit (ขอแก้ไข)
- cancelled (ยกเลิกโดย user)

---

## ตัวอย่างฟิลด์สำคัญในฐานข้อมูล
- users: id, employee_code, password_hash, title, first_name, last_name, position, phone, role_id, department_id, is_active, sick_leave_balance, vacation_leave_balance, personal_leave_balance
- leaves: id, user_id, leave_type, start_date, end_date, total_days, reason, status, attached_file
- approvals: id, leave_id, approver_id, role, action, comment, approved_at
- roles: id, role_name, role_level, description
- departments: id, department_code, department_name, description

---

## หมายเหตุ
- ระบบนี้สามารถปรับแต่งประเภทการลา, กฎ, และสิทธิ์แต่ละ role ได้ตามนโยบายองค์กร
- ทุก action มีการบันทึก log และแจ้งเตือนผู้เกี่ยวข้อง

---

> **หมายเหตุ:** หากต้องการรายละเอียดเชิงเทคนิค (API, SQL, โครงสร้างตาราง) หรือ flow diagram เพิ่มเติม แจ้งได้เลย!
